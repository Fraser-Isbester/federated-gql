{{ $schema := schema . -}}
####################################################
# Code generated by protoc-gen-graphql. DO NOT EDIT.
# Source: {{ .Location.SourceFile }}
# Service: {{ $schema.ServiceName }}
####################################################

{{ if $schema.RootQuery.Fields -}}
# Root Query entry point for {{ $schema.ServiceName }} service
extend type Query {
  {{ lower $schema.ServiceName }}: {{$schema.ServiceName}}Service!
}

# Service-specific queries for {{ $schema.ServiceName }}
type {{$schema.ServiceName}}Service {
{{- range $field := $schema.RootQuery.Fields }}
  {{- if $field.Comment }}
  # {{ $field.Comment }}
  {{- end }}
  {{- $responseType := (index $schema.Types 0).Name -}}
  {{- $inputType := (index $schema.Inputs 0).Name -}}
  {{- $fieldName := trimPrefix $field.Name "get" | lower -}}
  {{- $paramName := "input" -}}
  {{- if hasSuffix $paramName "Id" -}}
    {{- $paramName = (trimSuffix $paramName "Id") -}}
    {{- $paramName = (printf "%sID" $paramName) -}}
  {{- end -}}
  {{ $fieldName }}({{ $paramName }}: {{ $inputType }}!): {{ $responseType }}{{ if $field.IsRequired }}!{{ end }}
{{- end }}
}
{{ end -}}

{{ range $type := $schema.Types -}}
{{ if not (eq $type.Name "Query") -}}
{{- if $type.Comment }}
# {{ $type.Comment }}
{{- end }}
type {{ $type.Name }} @key(fields: "id") {
{{- range $field := $type.Fields }}
  {{- if $field.Comment }}
  # {{ $field.Comment }}
  {{- end }}
  {{- $fieldName := $field.Name -}}
  {{- if eq $fieldName (printf "%sId" (lower $schema.ServiceName)) -}}
    {{- $fieldName = "id" -}}
  {{- end -}}
  {{- if hasSuffix $fieldName "Id" -}}
    {{- $fieldName = (trimSuffix $fieldName "Id") -}}
    {{- $fieldName = (printf "%sID" $fieldName) -}}
  {{- end -}}
  {{- $fieldType := $field.Type -}}
  {{- if isIDField $fieldName -}}
    {{- if ne $fieldType "ID" -}}
      {{- $fieldType = "ID" -}}
    {{- end -}}
  {{- else if hasSuffix $fieldName "name" -}}
    {{- if eq $fieldType "ID" -}}
      {{- $fieldType = "String" -}}
    {{- end -}}
  {{- end }}
  {{ $fieldName }}: {{ $fieldType }}{{ if $field.IsRequired }}!{{ end }}
{{- end }}
}
{{ end -}}
{{ end -}}

{{ range $input := $schema.Inputs -}}
{{- if $input.Comment }}
# {{ $input.Comment }}
{{- end }}
input {{ $input.Name }} {
{{- range $field := $input.Fields }}
  {{- if $field.Comment }}
  # {{ $field.Comment }}
  {{- end }}
  {{- $fieldName := $field.Name -}}
  {{- if eq $fieldName (printf "%sId" (lower $schema.ServiceName)) -}}
    {{- $fieldName = "id" -}}
  {{- end -}}
  {{- if hasSuffix $fieldName "Id" -}}
    {{- $fieldName = (trimSuffix $fieldName "Id") -}}
    {{- $fieldName = (printf "%sID" $fieldName) -}}
  {{- end }}
  {{ $fieldName }}: {{ $field.Type }}{{ if $field.IsRequired }}!{{ end }}
{{- end }}
}
{{ end -}}
